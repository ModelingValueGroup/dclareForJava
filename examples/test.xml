<?xml version="1.0" encoding="UTF-8"?>
<project name="test.examples" default="test.results.jar.examples">
  <!--==============================================================-->
  <!-- WARNING: this file will be overwritten by the build scripts! -->
  <!--==============================================================-->
  <path id="classpath.test.examples">
    <path>
      <pathelement location="${path.variable.maven_repository}/junit/junit/4.12/junit-4.12.jar"/>
      <pathelement location="${path.variable.maven_repository}/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar"/>
      <pathelement location="${path.variable.maven_repository}/org/modelingvalue/dclare/0.0.4/dclare-0.0.4.jar"/>
      <pathelement location="${path.variable.maven_repository}/org/modelingvalue/immutable-collections/1.0.6/immutable-collections-1.0.6.jar"/>
    </path>
    <dirset dir="out/production">
      <include name="*"/>
    </dirset>
    <dirset dir="out/test">
      <include name="*"/>
    </dirset>
  </path>
  <target name="test.examples">
    <junit haltonfailure="on" logfailedtests="on" fork="on" forkmode="once">
      <!-- fork="on" forkmode="perTest" threads="8" -->
      <classpath refid="classpath.test.examples"/>
      <batchtest todir=".">
        <fileset dir="out/test/examples">
          <include name="**/*Test.*"/>
          <include name="**/*Tests.*"/>
        </fileset>
        <formatter type="xml"/>
      </batchtest>
    </junit>
  </target>
  <target name="test.results.jar.examples" depends="test.examples">
    <mkdir dir="${basedir}/out/artifacts"/>
    <jar destfile="${basedir}/out/artifacts/examples-testresults.jar" filesetmanifest="skip">
      <zipfileset file="${basedir}/TEST-*.xml"/>
    </jar>
  </target>
</project>
