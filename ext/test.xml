<?xml version="1.0" encoding="UTF-8"?>
<!--==============================================================-->
<!-- WARNING: this file will be overwritten by the build scripts! -->
<!--          change  project.sh  instead                         -->
<!--==============================================================-->
<project name="test.ext" default="test.results.jar.ext">
  <path id="classpath.test.ext">
    <path>
      <pathelement location="${path.variable.maven_repository}/junit/junit/4.12/junit-4.12.jar"/>
      <pathelement location="${path.variable.maven_repository}/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar"/>
      <pathelement location="${path.variable.maven_repository}/org/modelingvalue/dclare/0.0.6/dclare-0.0.6.jar"/>
      <pathelement location="${path.variable.maven_repository}/org/modelingvalue/immutable-collections/1.0.15/immutable-collections-1.0.15.jar"/>
    </path>
    <dirset dir="out/production">
      <include name="*"/>
    </dirset>
    <dirset dir="out/test">
      <include name="*"/>
    </dirset>
  </path>
  <target name="test.ext">
    <junit haltonfailure="on" logfailedtests="on" fork="on" forkmode="once">
      <!-- fork="on" forkmode="perTest" threads="8" -->
      <classpath refid="classpath.test.ext"/>
      <batchtest todir=".">
        <fileset dir="out/test/ext">
          <include name="**/*Test.*"/>
          <include name="**/*Tests.*"/>
        </fileset>
        <formatter type="xml"/>
      </batchtest>
    </junit>
  </target>
  <target name="test.results.jar.ext" depends="test.ext">
    <mkdir dir="${basedir}/out/artifacts"/>
    <jar destfile="${basedir}/out/artifacts/ext-testresults.jar" filesetmanifest="skip">
      <zipfileset file="${basedir}/TEST-*.xml"/>
    </jar>
  </target>
</project>
